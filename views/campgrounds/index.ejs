<%- layout("./layouts/boilerplate") %>
<script>
  const mapToken = '<%- process.env.MAPBOX_TOKEN %>'
  const allCampgrounds = { features: <%-JSON.stringify(allCampgrounds)%> };
</script>

<div id="cluster-map"></div>
<h1 class="mb-3">All Campgrounds</h1>
<ul>
    <% for (let campground of allCampgrounds) { %>
        <div class="card mb-3 mt-4">
            <div class="row g-0">
              <div class="col-md-4">
                <% if(campground.images.length) { %>
                  <img crossorigin="anonymous" src="<%= campground.images[0].url %>" class="img-fluid rounded-start card-img-top">
                <% } else { %>
                  <img src="https://res.cloudinary.com/dekrwwflr/image/upload/v1707884830/YelpCamp/mnx9hwsxbuntmmkebeug.jpg" class="img-fluid rounded-start card-img" crossorigin="anonymous"> 
                <% } %>
              </div>
              <div class="col-md-8">
                <div class="card-body">
                  <h5 class="card-title"><%= campground.title %></h5>
                  <p class="card-text"><%= campground.description %></p>
                  <a href="/campgrounds/<%= campground._id %>" class = "btn btn-primary"> view <%= campground.title %></a>
                </div>
              </div>
            </div>
          </div>
    <% } %>
</ul>

<script src="/scripts/clusterMap.js"></script>